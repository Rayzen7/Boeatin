import{W as w,r as c,j as e,Y as k,a as j}from"./app-DUtIMScC.js";import{r as y,s as N,u as v,g as U}from"./firebase-BrFWFcvJ.js";import{S as p}from"./sweetalert2.all-vhYJNkj1.js";const q=()=>{const{data:r,setData:s,post:b,processing:o,errors:C}=w({nama:"",deskripsi:"",harga:"",link:"",img_Url:"",kategori:""}),[i,m]=c.useState(null),[n,u]=c.useState(!1),t=a=>{s(a.target.name,a.target.value)},f=a=>{const l=a.target.files[0];l&&(m(l),h(l))},h=a=>{u(!0);const l=y(N,`products/${a.name}`),g=v(l,a);g.on("state_changed",null,d=>{console.error("Kesalahan saat mengupload:",d),p.fire({icon:"error",title:"Gagal Mengupload",text:"Gagal mengupload gambar. Silakan coba lagi."}),u(!1)},async()=>{const d=await U(g.snapshot.ref);s("img_Url",d),u(!1)})},x=a=>{a.preventDefault(),b("/products",{...r}),p.fire({icon:"success",title:"Berhasil!",text:"Produk berhasil ditambahkan!"}),s({nama:"",deskripsi:"",harga:"",link:"",img_Url:"",kategori:""}),m(null)};return e.jsxs("div",{className:"flex bg-gray-100 my-20",children:[e.jsx(k,{title:"AddProduct"}),e.jsxs("div",{className:"flex lg:flex-row flex-col justify-center items-center h-screen w-full lg:gap-0 gap-8 ",children:[e.jsx("div",{className:"flex justify-center items-center lg:w-1/3 w-[250px] lg:mr-4 mr-0 lg:mt-0 mt-[90%] bg-white rounded-lg p-4",children:i?e.jsx("img",{src:URL.createObjectURL(i),alt:"Preview",className:"w-full h-auto rounded-lg shadow-lg"}):e.jsx("div",{className:"text-center text-gray-400",children:"No image here"})}),e.jsxs("form",{onSubmit:x,className:"bg-white p-8 rounded-lg shadow-lg lg:w-full w-[320px] max-w-md",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center",children:"Tambah Produk"}),e.jsx("input",{type:"text",name:"nama",placeholder:"Nama Produk",value:r.nama,onChange:t,required:!0,className:"border border-gray-300 rounded-md p-2 mb-4 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("textarea",{name:"deskripsi",placeholder:"Deskripsi",value:r.deskripsi,onChange:t,required:!0,className:"border border-gray-300 rounded-md p-2 mb-4 w-full h-24 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"number",name:"harga",placeholder:"Harga",value:r.harga,onChange:t,required:!0,className:"border border-gray-300 rounded-md p-2 mb-4 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"url",name:"link",placeholder:"Link Produk",value:r.link,onChange:t,required:!0,className:"border border-gray-300 rounded-md p-2 mb-4 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"text",name:"kategori",placeholder:"Kategori",value:r.kategori,onChange:t,required:!0,className:"border border-gray-300 rounded-md p-2 mb-4 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"text",placeholder:"Link Gambar (otomatis terbuat)",value:r.img_Url,readOnly:!0,className:"border border-gray-300 rounded-md p-2 mb-4 w-full focus:outline-none"}),e.jsx("input",{type:"file",onChange:f,accept:"image/*",className:"mb-4 w-full",required:!0}),e.jsx("button",{type:"submit",disabled:o||n,className:`w-full p-2 rounded-md font-semibold ${o||n?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white transition duration-300`,children:n?"Menambahkan gambar...":o?"Menambahkan...":"Tambah Produk"}),e.jsx(j,{href:route("dashboard"),children:e.jsx("button",{className:"w-full p-2 mt-4 rounded-md font-semibold bg-red-600 hover:bg-red-700 text-white",children:"Keluar"})})]})]})]})};export{q as default};
